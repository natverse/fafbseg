<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Finds the supervoxel ids for the input rootid and then maps
  those to their current rootid by simple majority vote."><title>Find the most up to date FlyWire rootid for one or more input rootids — flywire_latestid • fafbseg</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Find the most up to date FlyWire rootid for one or more input rootids — flywire_latestid"><meta property="og:description" content="Finds the supervoxel ids for the input rootid and then maps
  those to their current rootid by simple majority vote."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">fafbseg</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.13.0.9100</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/FAFB-FlyWire.html">FAFB-FlyWire</a>
    <a class="dropdown-item" href="../articles/accessing-graphene-server.html">Accessing the chunked graph server</a>
    <a class="dropdown-item" href="../articles/capturing-ngl-meshes.html">Capturing neuroglancer meshes from a browser scene</a>
    <a class="dropdown-item" href="../articles/installing-cloudvolume-meshparty.html">Installing python modules: cloudvolume, meshparty and skeletor</a>
    <a class="dropdown-item" href="../articles/mesh-to-mesh.html">Mesh to mesh distances</a>
    <a class="dropdown-item" href="../articles/fafbseg-catmaid-legacy-info.html">fafbseg-catmaid-legacy-info</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../SUPPORT.html">Help</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://natverse.org/">natverse</a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/natverse/fafbseg">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Find the most up to date FlyWire rootid for one or more input rootids</h1>
      <small class="dont-index">Source: <a href="https://github.com/natverse/fafbseg/blob/HEAD/R/flywire-api.R" class="external-link"><code>R/flywire-api.R</code></a></small>
      <div class="d-none name"><code>flywire_latestid.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Finds the supervoxel ids for the input rootid and then maps
  those to their current rootid by simple majority vote.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">flywire_latestid</span><span class="op">(</span></span>
<span>  <span class="va">rootid</span>,</span>
<span>  sample <span class="op">=</span> <span class="fl">100L</span>,</span>
<span>  level <span class="op">=</span> <span class="fl">2L</span>,</span>
<span>  timestamp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  version <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cloudvolume.url <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  Verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"leaves"</span>, <span class="st">"cave"</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>rootid</dt>
<dd><p>One ore more FlyWire rootids defining a segment (in any form
interpretable by <code><a href="ngl_segments.html">ngl_segments</a></code>)</p></dd>


<dt>sample</dt>
<dd><p>An absolute or fractional number of supervoxel ids to map to
rootids or <code>FALSE</code> (see details).</p></dd>


<dt>level</dt>
<dd><p>The resolution level of the chunked graph to use when
calculating identity changes. An integer between 1 and 2. The default (2,
implying slightly larger supervoxels) is considerably faster but gives good
results for all but the smallest fragments. See
<code><a href="flywire_l2ids.html">flywire_l2ids</a></code>.</p></dd>


<dt>timestamp</dt>
<dd><p>An optional timestamp as a string or POSIXct, interpreted as
UTC when no timezone is specified.</p></dd>


<dt>version</dt>
<dd><p>An optional CAVE materialisation version number. See details
and examples.</p></dd>


<dt>cloudvolume.url</dt>
<dd><p>URL for CloudVolume to fetch segmentation image data.
The default value of NULL chooses the flywire production segmentation
dataset.</p></dd>


<dt>Verbose</dt>
<dd><p>When set to <code>TRUE</code> prints information about what fraction
of</p></dd>


<dt>method</dt>
<dd><p><code>"cave"</code> uses the <code>caveclient</code> python module, which
is generally faster, but has the disadvantage that it does not disambiguate
between the two options after a split. "auto" chooses cave when available
"leaves" otherwise.</p></dd>


<dt>...</dt>
<dd><p>Additional arguments passed to <code><a href="flywire_leaves.html">flywire_leaves</a></code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A character vector of rootids. When the input is 0 or NA or a rootid
  that does not exist in the chunked graph, the output will be 0.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>By default a sample of the input rootids is used since that step is
  the most time consuming part. The sample can be defined as a fraction
  (0&lt;sample&lt;1) or an absolute number. They will be clamped to the actual
  number of supervoxels in the object.</p>
<p><code>flywire_latestid</code> does a precheck to see if the input rootids have
  been updated using <code><a href="flywire_islatest.html">flywire_islatest</a></code>; this precheck is very
  fast (thousands of neurons per second). Only those ids that are not up to
  date are then further processed to identify the new rootid. This second
  step is slow (order 1-10 s per object). If you need to do this regularly
  for a set of neurons, it is <b>much</b> better to keep an XYZ location or
  even better a supervoxel id at a safe location on the neuron such as the
  primary branch point (typically where the cell body fibre joins the rest of
  the neuron).</p>
<p>Note that after edits that remove pieces of a starting neuron,
  flywire_latestid will return the id of the largest resultant piece.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other flywire-ids: 
<code><a href="flywire_islatest.html">flywire_islatest</a>()</code>,
<code><a href="flywire_last_modified.html">flywire_last_modified</a>()</code>,
<code><a href="flywire_leaves.html">flywire_leaves</a>()</code>,
<code><a href="flywire_rootid.html">flywire_rootid</a>()</code>,
<code><a href="flywire_updateids.html">flywire_updateids</a>()</code>,
<code><a href="flywire_xyz2id.html">flywire_xyz2id</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># one of the neurons displayed in the sandbox</span></span></span>
<span class="r-in"><span><span class="fu"><a href="choose_segmentation.html">with_segmentation</a></span><span class="op">(</span><span class="st">'sandbox'</span>, <span class="fu">flywire_latestid</span><span class="op">(</span><span class="st">'720575940625602908'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "720575940611617617"</span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="choose_segmentation.html">with_segmentation</a></span><span class="op">(</span><span class="st">'sandbox'</span>, <span class="fu">flywire_latestid</span><span class="op">(</span><span class="st">'720575940625602908'</span>, Verbose <span class="op">=</span> <span class="cn">T</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># check every supervoxel (slow for bigger neurons, but this KC is smallish)</span></span></span>
<span class="r-in"><span><span class="fu">flywire_latestid</span><span class="op">(</span><span class="st">'720575940616243077'</span>, sample<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># update a neuroglancer URL with the most up to date segment ids</span></span></span>
<span class="r-in"><span><span class="co"># nb this is slow since it looks at all supervoxels - much more efficient to</span></span></span>
<span class="r-in"><span><span class="co"># store a single xyz location or supervoxel id</span></span></span>
<span class="r-in"><span><span class="va">u</span><span class="op">=</span><span class="st">"https://ngl.flywire.ai/?json_url=https://globalv1.flywire-daf.com/nglstate/5695907068641280"</span></span></span>
<span class="r-in"><span><span class="fu"><a href="ngl_segments.html">ngl_segments</a></span><span class="op">(</span><span class="va">u</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu">flywire_latestid</span><span class="op">(</span><span class="fu"><a href="ngl_segments.html">ngl_segments</a></span><span class="op">(</span><span class="va">u</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># open modified URL in your browser</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/browseURL.html" class="external-link">browseURL</a></span><span class="op">(</span><span class="va">u</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Gregory Jefferis.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

