<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Find the input/output partners for a flywire neuron — flywire_partners • fafbseg</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Find the input/output partners for a flywire neuron — flywire_partners"><meta name="description" content="flywire_partners is a low level function returning one
  row for every synapse.
flywire_partner_summary summarises the connectivity of
  one or more flywire neurons."><meta property="og:description" content="flywire_partners is a low level function returning one
  row for every synapse.
flywire_partner_summary summarises the connectivity of
  one or more flywire neurons."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">fafbseg</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.14.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/accessing-graphene-server.html">Accessing the chunked graph server</a></li>
    <li><a class="dropdown-item" href="../articles/capturing-ngl-meshes.html">Capturing neuroglancer meshes from a browser scene</a></li>
    <li><a class="dropdown-item" href="../articles/FAFB-FlyWire.html">FAFB-FlyWire</a></li>
    <li><a class="dropdown-item" href="../articles/fafbseg-catmaid-legacy-info.html">fafbseg-catmaid-legacy-info</a></li>
    <li><a class="dropdown-item" href="../articles/installing-cloudvolume-meshparty.html">Installing python modules: cloudvolume, meshparty and skeletor</a></li>
    <li><a class="dropdown-item" href="../articles/mesh-to-mesh.html">Mesh to mesh distances</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="../SUPPORT.html">Help</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://natverse.org/">natverse</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/natverse/fafbseg"><span class="fa fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Find the input/output partners for a flywire neuron</h1>
      <small class="dont-index">Source: <a href="https://github.com/natverse/fafbseg/blob/master/R/autosyn.R" class="external-link"><code>R/autosyn.R</code></a></small>
      <div class="d-none name"><code>flywire_partners.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>flywire_partners</code> is a low level function returning one
  row for every synapse.</p>
<p><code>flywire_partner_summary</code> summarises the connectivity of
  one or more flywire neurons.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">flywire_partners</span><span class="op">(</span></span>
<span>  <span class="va">rootids</span>,</span>
<span>  partners <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"outputs"</span>, <span class="st">"inputs"</span>, <span class="st">"both"</span><span class="op">)</span>,</span>
<span>  details <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  roots <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  reference <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"either"</span>, <span class="st">"FAFB14"</span>, <span class="st">"FlyWire"</span><span class="op">)</span>,</span>
<span>  cloudvolume.url <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"spine"</span>, <span class="st">"sqlite"</span><span class="op">)</span>,</span>
<span>  Verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  local <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">flywire_partner_summary</span><span class="op">(</span></span>
<span>  <span class="va">rootids</span>,</span>
<span>  partners <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"outputs"</span>, <span class="st">"inputs"</span><span class="op">)</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  remove_autapses <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cleft.threshold <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  summarise <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  surf <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  version <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  timestamp <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  chunksize <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"auto"</span>, <span class="st">"spine"</span>, <span class="st">"sqlite"</span>, <span class="st">"cave"</span><span class="op">)</span>,</span>
<span>  Verbose <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  local <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-rootids">rootids<a class="anchor" aria-label="anchor" href="#arg-rootids"></a></dt>
<dd><p>Character vector specifying one or more flywire rootids. As a
convenience for <code>flywire_partner_summary</code> this argument is passed to
<code><a href="flywire_ids.html">flywire_ids</a></code> allowing you to pass in data.frames, flywire URLs
or cell type queries.</p></dd>


<dt id="arg-partners">partners<a class="anchor" aria-label="anchor" href="#arg-partners"></a></dt>
<dd><p>Whether to fetch input or output synapses or both.</p></dd>


<dt id="arg-details">details<a class="anchor" aria-label="anchor" href="#arg-details"></a></dt>
<dd><p>Whether to include additional details such as X Y Z location
(default <code>FALSE</code>)</p></dd>


<dt id="arg-roots">roots<a class="anchor" aria-label="anchor" href="#arg-roots"></a></dt>
<dd><p>Whether to fetch the flywire rootids of the partner neurons
(default <code>TRUE</code>)</p></dd>


<dt id="arg-reference">reference<a class="anchor" aria-label="anchor" href="#arg-reference"></a></dt>
<dd><p>A character vector or a <code>templatebrain</code> object
specifying the reference template brain for any 3D coordinate information.
The default value of <code>"either"</code> will use the natural reference space
of the data source (FAFB14 for SQLite tables, FlyWire for the spine
service).</p></dd>


<dt id="arg-cloudvolume-url">cloudvolume.url<a class="anchor" aria-label="anchor" href="#arg-cloudvolume-url"></a></dt>
<dd><p>The segmentation source URL for cloudvolume. Normally
you can ignore this and rely on the default segmentation chosen by
<code><a href="choose_segmentation.html">choose_segmentation</a></code></p></dd>


<dt id="arg-method">method<a class="anchor" aria-label="anchor" href="#arg-method"></a></dt>
<dd><p>Whether to use a local SQLite database or remote spine service
for synapse data. The default <code>auto</code> uses a local database when
available (45GB but faster).</p></dd>


<dt id="arg-verbose">Verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>Whether to print status messages</p></dd>


<dt id="arg-local">local<a class="anchor" aria-label="anchor" href="#arg-local"></a></dt>
<dd><p>path to SQLite synapse data. Evaluated by
<code>fafbseg:::local_or_google</code>. Work in progress. Default is to download
this data and place it in <code>~/projects/JanFunke</code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed to <code>pbsapply</code></p></dd>


<dt id="arg-threshold">threshold<a class="anchor" aria-label="anchor" href="#arg-threshold"></a></dt>
<dd><p>For <code>flywire_partner_summary</code> only return partners with
greater than this number of connections to the query neuron(s) (default of
0 returns all connections)</p></dd>


<dt id="arg-remove-autapses">remove_autapses<a class="anchor" aria-label="anchor" href="#arg-remove-autapses"></a></dt>
<dd><p>For <code>flywire_partner_summary</code> whether to remove
autapses (defaults to TRUE)</p></dd>


<dt id="arg-cleft-threshold">cleft.threshold<a class="anchor" aria-label="anchor" href="#arg-cleft-threshold"></a></dt>
<dd><p>A threshold for the cleft score calculated by Buhmann
et al 2019 (default 0, we have used 30-100 to increase specificity)</p></dd>


<dt id="arg-summarise">summarise<a class="anchor" aria-label="anchor" href="#arg-summarise"></a></dt>
<dd><p>(This was never implemented.) Whether to collapse down the
results for multiple query neurons into a single entry for each partner
neuron.</p></dd>


<dt id="arg-surf">surf<a class="anchor" aria-label="anchor" href="#arg-surf"></a></dt>
<dd><p>An object defining a 3D ROI inside which the presynaptic position
must be located. Can be a <code>mesh3d</code> object, or any object which
<code><a href="https://rdrr.io/pkg/nat/man/as.mesh3d.html" class="external-link">as.mesh3d</a></code> can handle including <code><a href="https://rdrr.io/pkg/nat/man/read.hxsurf.html" class="external-link">hxsurf</a></code> and
<code><a href="https://rdrr.io/pkg/nat/man/boundingbox.html" class="external-link">boundingbox</a></code> objects. See <code><a href="https://rdrr.io/pkg/nat/man/pointsinside.html" class="external-link">pointsinside</a></code> for
details.</p></dd>


<dt id="arg-version">version<a class="anchor" aria-label="anchor" href="#arg-version"></a></dt>
<dd><p>Integer materialisation version. The special value of
<code>'latest'</code> means the most recent materialisation according to CAVE.</p></dd>


<dt id="arg-timestamp">timestamp<a class="anchor" aria-label="anchor" href="#arg-timestamp"></a></dt>
<dd><p>A timestamp to normalise into an R or Python timestamp in
UTC. The special value of <code>'now'</code> means the current time in UTC.</p></dd>


<dt id="arg-chunksize">chunksize<a class="anchor" aria-label="anchor" href="#arg-chunksize"></a></dt>
<dd><p>(expert use) number of query neurons to send per chunk to
cave client. Chunking requests speeds up queries (over sending neurons one
a time) while still avoiding row number limits on queries with many
neurons.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>data.frame</code> with a <code>regtemplate</code> attribute specifying
  the reference brain space for any xyz points. Columns vary slightly
  depending on whether data is fetched from spine/ITANNA or a local sqlite
  database. The more obscure ones include:</p>
<p></p><ul><li><p><code>prepost</code> When <code>partners = "both"</code> then this column will be
  present. For any given row (synapse), <code>prepost=1</code> when the initial
  query neuron is downstream (postsynaptic) and the partner is upstream.</p></li>
<li><p><code>score</code> came straight from Buhmann et al and is supposed to
  indicate some confidence score for the predicted synapse.</p></li>
<li><p><code>cleft_score</code> is the more useful one and was a later addition by
  Stephan Gerhard that asks whether the pre and post synapses are positioned
  at sensible distances on each side of a cleft defined by a separate neural
  network from Larissa Heinrich in Stephan Saalfeld’s group.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>FIXME behaviour when there are no partners is not well-defined.</p>
<p>Note that there are many duplicated connections in this raw output, false
  autapses (i.e. the same neuron connected to itself) and other false
  positives. See Buhmann et al for details and ideas about cleaning up the
  results.</p>
<p>Also note that the ids returned are of the class <code>integer64</code> for
  <code>flywire_partners</code> where there is one row for each
  synapses/connection; but for <code>flywire_partner_summary</code> where rows
  report the number of connections between pairs of neurons, they are of type
  <code>character</code>. This is because the <code>integer64</code> type is more compact
  but less robust because it is not a base R type but instead provided by the
  <code>bit64</code> package. Some R functions such as <code>sapply</code> strip the
  class from <code>integer64</code> vectors, treating them as doubles of a
  completely different value.</p>
<p><code>flywire_partners</code> and <code>flywire_partner_summary</code> by
  default report on the active connectivity state of neurons. At present only
  <code>flywire_partner_summary</code> allows time travel to historic
  materialisations using the <code>version</code> or <code>timestamp</code> arguments
  (see <code><a href="flywire_timestamp.html">flywire_timestamp</a></code> for details). This support actually
  depends on the cave backend (which will automatically be selected when
  <code>method='auto'</code>).</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other automatic-synapses:
<code><a href="flywire_adjacency_matrix.html">flywire_adjacency_matrix</a>()</code>,
<code><a href="flywire_neurons_add_synapses.html">flywire_neurons_add_synapses</a>()</code>,
<code><a href="flywire_ntplot.html">flywire_ntplot</a>()</code>,
<code><a href="flywire_ntpred.html">flywire_ntpred</a>()</code></p>
<p>Other automatic-synapses:
<code><a href="flywire_adjacency_matrix.html">flywire_adjacency_matrix</a>()</code>,
<code><a href="flywire_neurons_add_synapses.html">flywire_neurons_add_synapses</a>()</code>,
<code><a href="flywire_ntplot.html">flywire_ntplot</a>()</code>,
<code><a href="flywire_ntpred.html">flywire_ntpred</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="va">pp</span><span class="op">=</span><span class="fu">flywire_partners</span><span class="op">(</span><span class="st">"720575940621039145"</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>/home/runner/projects/JanFunke//flywire_synapses.db does not exist</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fetching supervoxel ids for id: 720575940621039145</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Finding synapses for supervoxels</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Reading synapse data</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Fetching root ids</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    offset    scores cleft_scores          pre_svid         post_svid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  152196  9.542592          117 81491472725509269 81491472725509199</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  828599 93.800766            0 81561978908660664 81561978908653994</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  828625 93.588776            1 81561978908669037 81561978908667521</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 1236913 54.307476            1 81631042385463742 81631042385462154</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 1236914 33.748131            0 81631042385459399 81631042385454876</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 1236915  6.670522            0 81631042385462087 81631042385470852</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              post_id             pre_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 720575940623607372 720575940621039145</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 720575940632985261 720575940621039145</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 720575940589754844 720575940621039145</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 720575940623607372 720575940621039145</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 720575940623607372 720575940621039145</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 720575940623607372 720575940621039145</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">class</a></span><span class="op">(</span><span class="va">pp</span><span class="op">$</span><span class="va">post_id</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "integer64"</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Note that post_id is of type character</span></span></span>
<span class="r-in"><span><span class="fu">flywire_partner_summary</span><span class="op">(</span><span class="st">"720575940621039145"</span>, partners<span class="op">=</span><span class="st">'out'</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in py_call_impl(x, dots$unnamed, dots$named):</span> ValueError: Timestamp incompatible with IDs: [720575940621039145] are expired,  use chunkedgraph client to find valid ID(s)</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> Run `reticulate::py_last_error()` for details.</span>
<span class="r-in"><span><span class="fu">flywire_partner_summary</span><span class="op">(</span><span class="st">"720575940621039145"</span>, partners<span class="op">=</span><span class="st">'in'</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in py_call_impl(x, dots$unnamed, dots$named):</span> ValueError: Timestamp incompatible with IDs: [720575940621039145] are expired,  use chunkedgraph client to find valid ID(s)</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> Run `reticulate::py_last_error()` for details.</span>
<span class="r-in"><span><span class="fu">flywire_partner_summary</span><span class="op">(</span><span class="st">"720575940621039145"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in py_call_impl(x, dots$unnamed, dots$named):</span> ValueError: Timestamp incompatible with IDs: [720575940621039145] are expired,  use chunkedgraph client to find valid ID(s)</span>
<span class="r-err co"><span class="r-pr">#&gt;</span> Run `reticulate::py_last_error()` for details.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># summary for neuron at a XYZ location (in this case in raw coordinates)</span></span></span>
<span class="r-in"><span><span class="fu">flywire_partner_summary</span><span class="op">(</span><span class="fu"><a href="flywire_xyz2id.html">flywire_xyz2id</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="fl">155682</span>, <span class="fl">58180</span>, <span class="fl">3215</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  rawcoords <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 1,213 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    query              post_id            weight</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> 720575940623607372 720575940639232858    172</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> 720575940623607372 720575940622838154     62</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> 720575940623607372 720575940631200327     62</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> 720575940623607372 720575940631914700     34</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> 720575940623607372 720575940628412732     31</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> 720575940623607372 720575940619553671     30</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> 720575940623607372 720575940621000831     29</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> 720575940623607372 720575940611428761     27</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> 720575940623607372 720575940624743946     27</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> 720575940623607372 720575940650971257     27</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 1,203 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># Use Ctrl+Shift+J to share a flywire scene and then do this to get partner</span></span></span>
<span class="r-in"><span><span class="co"># summary for that URL</span></span></span>
<span class="r-in"><span><span class="fu">flywire_partner_summary</span><span class="op">(</span><span class="fu">clipr</span><span class="fu">::</span><span class="fu"><a href="http://matthewlincoln.net/clipr/reference/read_clip.html" class="external-link">read_clip</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">cct</span><span class="op">=</span><span class="fu"><a href="flywire_cave_query.html">flywire_cave_query</a></span><span class="op">(</span><span class="st">'cambridge_celltypes'</span>, live <span class="op">=</span> <span class="cn">T</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dl1.lh</span><span class="op">=</span><span class="fu">flywire_partner_summary</span><span class="op">(</span><span class="va">cct</span><span class="op">$</span><span class="va">pt_root_id</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"DL1"</span>, <span class="va">cct</span><span class="op">$</span><span class="va">cell_type</span><span class="op">)</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  surf<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="fu">elmr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/elmr/man/FAFB.surf.html" class="external-link">FAFB14NP.surf</a></span>, <span class="st">"LH_R"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="co"># use a rectangular bounding box around LH instead</span></span></span>
<span class="r-in"><span><span class="va">dl1.lhbb</span><span class="op">=</span><span class="fu">flywire_partner_summary</span><span class="op">(</span><span class="va">cct</span><span class="op">$</span><span class="va">pt_root_id</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"DL1"</span>, <span class="va">cct</span><span class="op">$</span><span class="va">cell_type</span><span class="op">)</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  surf<span class="op">=</span><span class="fu"><a href="https://rdrr.io/pkg/nat/man/boundingbox.html" class="external-link">boundingbox</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/subset.html" class="external-link">subset</a></span><span class="op">(</span><span class="fu">elmr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/elmr/man/FAFB.surf.html" class="external-link">FAFB14NP.surf</a></span>, <span class="st">"LH_R"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gregory Jefferis.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

