<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Find the input/output partners for a flywire neuron — flywire_partners • fafbseg</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Find the input/output partners for a flywire neuron — flywire_partners" />
<meta property="og:description" content="flywire_partners is a low level function returning one
  row for every synapse.
flywire_partner_summary summarises the connectivity of
  one or more flywire neurons." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fafbseg</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.9.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/articles/FAFB-FlyWire.html">FAFB-FlyWire</a>
    </li>
    <li>
      <a href="../articles/articles/accessing-graphene-server.html">Accessing the chunked graph server</a>
    </li>
    <li>
      <a href="../articles/articles/capturing-ngl-meshes.html">Capturing neuroglancer meshes from a browser scene</a>
    </li>
    <li>
      <a href="../articles/articles/installing-cloudvolume-meshparty.html">Installing python modules: cloudvolume, meshparty and skeletor</a>
    </li>
    <li>
      <a href="../articles/articles/mesh-to-mesh.html">Mesh to mesh distances</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="../SUPPORT.html">Help</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://natverse.github.io">natverse</a>
</li>
<li>
  <a href="https://github.com/natverse/fafbseg">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Find the input/output partners for a flywire neuron</h1>
    <small class="dont-index">Source: <a href='https://github.com/natverse/fafbseg/blob/master/R/autosyn.R'><code>R/autosyn.R</code></a></small>
    <div class="hidden name"><code>flywire_partners.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>flywire_partners</code> is a low level function returning one
  row for every synapse.</p>
<p><code>flywire_partner_summary</code> summarises the connectivity of
  one or more flywire neurons.</p>
    </div>

    <pre class="usage"><span class='fu'>flywire_partners</span><span class='op'>(</span>
  <span class='va'>rootid</span>,
  partners <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"outputs"</span>, <span class='st'>"inputs"</span><span class='op'>)</span>,
  details <span class='op'>=</span> <span class='cn'>FALSE</span>,
  roots <span class='op'>=</span> <span class='cn'>TRUE</span>,
  cloudvolume.url <span class='op'>=</span> <span class='cn'>NULL</span>,
  method <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"auto"</span>, <span class='st'>"spine"</span>, <span class='st'>"sqlite"</span><span class='op'>)</span>,
  Verbose <span class='op'>=</span> <span class='cn'>TRUE</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='fu'>flywire_partner_summary</span><span class='op'>(</span>
  <span class='va'>rootid</span>,
  partners <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"outputs"</span>, <span class='st'>"inputs"</span><span class='op'>)</span>,
  threshold <span class='op'>=</span> <span class='fl'>0</span>,
  remove_autapses <span class='op'>=</span> <span class='cn'>TRUE</span>,
  Verbose <span class='op'>=</span> <span class='cn'>NA</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>rootid</th>
      <td><p>flywire rootids identifying flywire neurons as a character
vector or any format understandable by <code><a href='ngl_segments.html'>ngl_segments</a></code> including
neuroglancer scenes (<code><a href='ngl_decode_scene.html'>ngscene</a></code>).</p></td>
    </tr>
    <tr>
      <th>partners</th>
      <td><p>Whether to fetch input or output synapses</p></td>
    </tr>
    <tr>
      <th>details</th>
      <td><p>Whether to include additional details such as X Y Z location
(default <code>FALSE</code>)</p></td>
    </tr>
    <tr>
      <th>roots</th>
      <td><p>Whether to fetch the flywire rootids of the partner neurons
(default <code>TRUE</code>)</p></td>
    </tr>
    <tr>
      <th>cloudvolume.url</th>
      <td><p>The segmentation source URL for cloudvolume. Normally
you can ignore this and rely on the default segmentation chosen by
<code><a href='choose_segmentation.html'>choose_segmentation</a></code></p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>Whether to use a local SQLite database or remote spine service
for synapse data. The default <code>auto</code> uses a local database when
available (45GB but faster).</p></td>
    </tr>
    <tr>
      <th>Verbose</th>
      <td><p>Whether to print status messages</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments passed to <code>pbsapply</code></p></td>
    </tr>
    <tr>
      <th>threshold</th>
      <td><p>For <code>flywire_partner_summary</code> only return partners with
greater than this number of connections to the query neuron(s) (default of
0 returns all connections)</p></td>
    </tr>
    <tr>
      <th>remove_autapses</th>
      <td><p>For <code>flywire_partner_summary</code> whether to remove
autapses (defaults to TRUE)</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>FIXME behaviour when there are no partners is not well-defined.</p>
<p>Note that there are many duplicated connections in this raw output, false
  autapses (i.e. the same neuron connected to itself) and other false
  positives. See Buhmann et al for details and ideas about cleaning up the
  results.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other automatic-synapses: 
<code><a href='flywire_ntplot.html'>flywire_ntplot</a>()</code>,
<code><a href='flywire_ntpred.html'>flywire_ntpred</a>()</code></p>
<p>Other automatic-synapses: 
<code><a href='flywire_ntplot.html'>flywire_ntplot</a>()</code>,
<code><a href='flywire_ntpred.html'>flywire_ntpred</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='va'>pp</span><span class='op'>=</span><span class='fu'>flywire_partners</span><span class='op'>(</span><span class='st'>"720575940621039145"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Fetching supervoxel ids for id: 720575940621039145</span></div><div class='output co'>#&gt; <span class='message'>Finding synapses for supervoxels</span></div><div class='output co'>#&gt; <span class='message'>Fetching root ids</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>pp</span><span class='op'>)</span>
</div><div class='output co'>#&gt;    offset          pre_svid         post_svid            post_id
#&gt; 1  152196 81491472725509269 81491472725509199 720575940621039145
#&gt; 2  828599 81561978908660664 81561978908653994 720575940628471127
#&gt; 3  828625 81561978908669037 81561978908667521 720575940589754844
#&gt; 4 1236913 81631042385463742 81631042385462154 720575940621039145
#&gt; 5 1236914 81631042385459399 81631042385454876 720575940621039145
#&gt; 6 1236915 81631042385462087 81631042385470852 720575940621039145
#&gt;               pre_id
#&gt; 1 720575940621039145
#&gt; 2 720575940621039145
#&gt; 3 720575940621039145
#&gt; 4 720575940621039145
#&gt; 5 720575940621039145
#&gt; 6 720575940621039145</div><div class='input'><span class='co'># }</span>
<span class='co'># \donttest{</span>
<span class='fu'>flywire_partner_summary</span><span class='op'>(</span><span class='st'>"720575940621039145"</span>, partners<span class='op'>=</span><span class='st'>'out'</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Fetching supervoxel ids for id: 720575940621039145</span></div><div class='output co'>#&gt; <span class='message'>Finding synapses for supervoxels</span></div><div class='output co'>#&gt; <span class='message'>Fetching root ids</span></div><div class='output co'>#&gt; <span style='color: #555555;'># A tibble: 1,262 x 3</span><span>
#&gt;    post_id            weight     n
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>               </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 1</span><span> 720575940618522433    172     1
#&gt; </span><span style='color: #555555;'> 2</span><span> 720575940623301520     62     1
#&gt; </span><span style='color: #555555;'> 3</span><span> 720575940637390424     62     1
#&gt; </span><span style='color: #555555;'> 4</span><span> 720575940622541972     34     1
#&gt; </span><span style='color: #555555;'> 5</span><span> 720575940620466824     30     1
#&gt; </span><span style='color: #555555;'> 6</span><span> 720575940621370346     29     1
#&gt; </span><span style='color: #555555;'> 7</span><span> 720575940610168805     27     1
#&gt; </span><span style='color: #555555;'> 8</span><span> 720575940624743946     27     1
#&gt; </span><span style='color: #555555;'> 9</span><span> 720575940635067251     25     1
#&gt; </span><span style='color: #555555;'>10</span><span> 720575940613535430     24     1
#&gt; </span><span style='color: #555555;'># … with 1,252 more rows</span><span></div><div class='input'><span class='fu'>flywire_partner_summary</span><span class='op'>(</span><span class='st'>"720575940621039145"</span>, partners<span class='op'>=</span><span class='st'>'in'</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Fetching supervoxel ids for id: 720575940621039145</span></div><div class='output co'>#&gt; <span class='message'>Finding synapses for supervoxels</span></div><div class='output co'>#&gt; <span class='message'>Fetching root ids</span></div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 684 x 3</span><span>
#&gt;    pre_id             weight     n
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>               </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 1</span><span> 720575940613380914     90     1
#&gt; </span><span style='color: #555555;'> 2</span><span> 720575940623926970     88     1
#&gt; </span><span style='color: #555555;'> 3</span><span> 720575940621370346     77     1
#&gt; </span><span style='color: #555555;'> 4</span><span> 720575940602114016     74     1
#&gt; </span><span style='color: #555555;'> 5</span><span> 720575940637390424     69     1
#&gt; </span><span style='color: #555555;'> 6</span><span> 720575940610188697     56     1
#&gt; </span><span style='color: #555555;'> 7</span><span> 720575940619059120     56     1
#&gt; </span><span style='color: #555555;'> 8</span><span> 720575940623931710     53     1
#&gt; </span><span style='color: #555555;'> 9</span><span> 720575940613535430     51     1
#&gt; </span><span style='color: #555555;'>10</span><span> 720575940621317610     51     1
#&gt; </span><span style='color: #555555;'># … with 674 more rows</span><span></div><div class='input'><span class='fu'>flywire_partner_summary</span><span class='op'>(</span><span class='st'>"720575940621039145"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Fetching supervoxel ids for id: 720575940621039145</span></div><div class='output co'>#&gt; <span class='message'>Finding synapses for supervoxels</span></div><div class='output co'>#&gt; <span class='message'>Fetching root ids</span></div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 1,262 x 3</span><span>
#&gt;    post_id            weight     n
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>               </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 1</span><span> 720575940618522433    172     1
#&gt; </span><span style='color: #555555;'> 2</span><span> 720575940623301520     62     1
#&gt; </span><span style='color: #555555;'> 3</span><span> 720575940637390424     62     1
#&gt; </span><span style='color: #555555;'> 4</span><span> 720575940622541972     34     1
#&gt; </span><span style='color: #555555;'> 5</span><span> 720575940620466824     30     1
#&gt; </span><span style='color: #555555;'> 6</span><span> 720575940621370346     29     1
#&gt; </span><span style='color: #555555;'> 7</span><span> 720575940610168805     27     1
#&gt; </span><span style='color: #555555;'> 8</span><span> 720575940624743946     27     1
#&gt; </span><span style='color: #555555;'> 9</span><span> 720575940635067251     25     1
#&gt; </span><span style='color: #555555;'>10</span><span> 720575940613535430     24     1
#&gt; </span><span style='color: #555555;'># … with 1,252 more rows</span><span></div><div class='input'>
<span class='co'># summary for neuron at a XYZ location (in this case in raw coordinates)</span>
<span class='fu'>flywire_partner_summary</span><span class='op'>(</span><span class='fu'><a href='flywire_xyz2id.html'>flywire_xyz2id</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/cbind.html'>cbind</a></span><span class='op'>(</span><span class='fl'>155682</span>, <span class='fl'>58180</span>, <span class='fl'>3215</span><span class='op'>)</span>,
  rawcoords <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Fetching supervoxel ids for id: 720575940621039145</span></div><div class='output co'>#&gt; <span class='message'>Finding synapses for supervoxels</span></div><div class='output co'>#&gt; <span class='message'>Fetching root ids</span></div><div class='output co'>#&gt; </span><span style='color: #555555;'># A tibble: 1,262 x 3</span><span>
#&gt;    post_id            weight     n
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>               </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 1</span><span> 720575940618522433    172     1
#&gt; </span><span style='color: #555555;'> 2</span><span> 720575940623301520     62     1
#&gt; </span><span style='color: #555555;'> 3</span><span> 720575940637390424     62     1
#&gt; </span><span style='color: #555555;'> 4</span><span> 720575940622541972     34     1
#&gt; </span><span style='color: #555555;'> 5</span><span> 720575940620466824     30     1
#&gt; </span><span style='color: #555555;'> 6</span><span> 720575940621370346     29     1
#&gt; </span><span style='color: #555555;'> 7</span><span> 720575940610168805     27     1
#&gt; </span><span style='color: #555555;'> 8</span><span> 720575940624743946     27     1
#&gt; </span><span style='color: #555555;'> 9</span><span> 720575940635067251     25     1
#&gt; </span><span style='color: #555555;'>10</span><span> 720575940613535430     24     1
#&gt; </span><span style='color: #555555;'># … with 1,252 more rows</span><span></div><div class='input'>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='co'># Use Ctrl+Shift+J to share a flywire scene and then do this to get partner</span>
<span class='co'># summary for that URL</span>
<span class='fu'>flywire_partner_summary</span><span class='op'>(</span><span class='fu'>clipr</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/clipr/man/read_clip.html'>read_clip</a></span><span class='op'>(</span><span class='op'>)</span><span class='op'>)</span>

<span class='op'>}</span>
<span class='co'># }</span>
</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Gregory Jefferis.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


