<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Low level access to the Flywire CAVE annotation system — flywire_cave_client • fafbseg</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Low level access to the Flywire CAVE annotation system — flywire_cave_client"><meta property="og:description" content="Low level access to the Flywire CAVE annotation system"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">fafbseg</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.12.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/FAFB-FlyWire.html">FAFB-FlyWire</a>
    </li>
    <li>
      <a href="../articles/accessing-graphene-server.html">Accessing the chunked graph server</a>
    </li>
    <li>
      <a href="../articles/capturing-ngl-meshes.html">Capturing neuroglancer meshes from a browser scene</a>
    </li>
    <li>
      <a href="../articles/installing-cloudvolume-meshparty.html">Installing python modules: cloudvolume, meshparty and skeletor</a>
    </li>
    <li>
      <a href="../articles/mesh-to-mesh.html">Mesh to mesh distances</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="../SUPPORT.html">Help</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://natverse.org/" class="external-link">natverse</a>
</li>
<li>
  <a href="https://github.com/natverse/fafbseg" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Low level access to the Flywire CAVE annotation system</h1>
    <small class="dont-index">Source: <a href="https://github.com/natverse/fafbseg/blob/HEAD/R/cave.R" class="external-link"><code>R/cave.R</code></a></small>
    <div class="hidden name"><code>flywire_cave_client.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Low level access to the Flywire CAVE annotation system</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">flywire_cave_client</span><span class="op">(</span></span>
<span>  datastack_name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">getOption</a></span><span class="op">(</span><span class="st">"fafbseg.cave.datastack_name"</span>, <span class="st">"flywire_fafb_production"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>datastack_name</dt>
<dd><p>defaults to "flywire_fafb_production". See
<a href="https://global.daf-apis.com/info/" class="external-link">https://global.daf-apis.com/info/</a> for other options.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The <code>caveclient.frameworkclient.CAVEclientFull</code> Python module
  wrapped by reticulate.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This depends on installation of the Python caveclient library. See
  <code><a href="flywire_cave_query.html">flywire_cave_query</a></code> for more details.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="va">fac</span> <span class="op">&lt;-</span> <span class="fu">flywire_cave_client</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">fac</span><span class="op">$</span><span class="va">annotation</span><span class="op">$</span><span class="fu">get_tables</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "synaptic_clefts"                     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2] "proofreading_status_public_v1"       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3] "neuron_information_vtest"            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4] "synapses_nt_v1"                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "fly_synapses_neuropil"               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6] "cambridge_celltypes"                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "proofreading_review_public_vtest"    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8] "braincircuits_annotation_test"       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "valid_synapses_nt_vtest"             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10] "neuron_information_v1"               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "nuclei_v1"                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [12] "valid_synapses_nt_v2"                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] "valid_synapses_nt_v1"                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [14] "proofreading_review_public_v1"       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [15] "braincircuits_annotation_test2"      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [16] "neuron_representative_coordinates_v1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [17] "hierarchical_cell_types_v1"          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [18] "neuron_information_v2"               </span>
<span class="r-in"><span><span class="va">fac</span><span class="op">$</span><span class="va">annotation</span><span class="op">$</span><span class="fu">get_table_metadata</span><span class="op">(</span><span class="st">'nuclei_v1'</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $created</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2021-06-23T17:59:17.195098"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $table_name</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "nuclei_v1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $read_permission</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "PUBLIC"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $last_modified</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2022-10-25T19:49:21.621037"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $reference_table</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $description</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "\nFlyWire nucleus description\nNucleus version: 20210322\n\nNuclei in this table consist of center points (in nm), volume (in μm3), and bounding boxes (in nm).\n\nThe nucleus segmentation was generated by Shang Mu (smu@princeton.edu, Seung Lab at Princeton University) using a 2D convolutional neural network (CNN) and heuristic interpolations. The training data was assembled from annotations by Selden Koolman, Merlin Moore, Sarah Morejohn, Ben Silverman, Kyle Willie, Ryan Willie, Szi-chieh Yu and Shang Mu.\n\nAs this data was generated using a 2D, rather than 3D, neural network, defects are present in the detected nuclei, particularly where there are large defects in section alignment or a number of consecutive missing sections.\n\nFalse positive fragments, nucleus fragments and partial nuclei are the most common type of defects. A simple, rudimentary method for cleaning up is to disregard small fragments by thresholding by segment size or by the z-dimension of the bounding boxes. A size threshold of 2000 voxels (0.08 μm3) was already applied in producing this segmentation.\n\nA minimal number of nucleus merger instances have been observed, caused by section alignment defects or close nuclei appositions in certain non-neuronal cell clusters.\n\nWhen using the nucleus annotations, please acknowledge Shang Mu and let him know about your use case.\n\nWe encourage making (and using) improvements to this data based on the information provided (for example, utilizing bounding box dimensions and/or the segmentation to find and merge incorrectly split partial nuclei), and such improvements should be discussed with Shang. Data derived solely from this work should be similarly made available on this platform at the time of use in any publication.\n"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $deleted</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $valid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $schema_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "nucleus_detection"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $write_permission</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "PRIVATE"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $flat_segmentation_source</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "precomputed://gs://neuroglancer/drosophila_v0/nucleus/v5_z_intp_intp/seg"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $notice_text</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $user_id</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "2"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $voxel_resolution</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1 1 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># annotation tables that have been materialised in order to map XYZ</span></span></span>
<span class="r-in"><span><span class="co"># points onto current root ids (and immutable supervoxel ids)</span></span></span>
<span class="r-in"><span><span class="co"># typically the same as fac$annotation$get_tables()</span></span></span>
<span class="r-in"><span><span class="va">fac</span><span class="op">$</span><span class="va">materialize</span><span class="op">$</span><span class="fu">get_tables</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "neuron_information_vtest"            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [2] "synapses_nt_v1"                      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [3] "fly_synapses_neuropil"               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4] "cambridge_celltypes"                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [5] "proofreading_review_public_vtest"    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [6] "braincircuits_annotation_test"       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "valid_synapses_nt_vtest"             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [8] "nuclei_v1"                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "valid_synapses_nt_v2"                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10] "valid_synapses_nt_v1"                </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [11] "proofreading_review_public_v1"       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [12] "neuron_representative_coordinates_v1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] "proofreading_status_public_v1"       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [14] "neuron_information_v2"               </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">info</span><span class="op">=</span><span class="va">fac</span><span class="op">$</span><span class="va">info</span><span class="op">$</span><span class="fu">get_datastack_info</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># the default synapse table for the dataset</span></span></span>
<span class="r-in"><span><span class="va">info</span><span class="op">$</span><span class="va">synapse_table</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "synapses_nt_v1"</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Gregory Jefferis.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

